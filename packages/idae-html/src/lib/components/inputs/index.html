<style>
  body{font-family:system-ui,Arial,sans-serif;padding:16px}
  .field{margin-bottom:12px}
  .error{color:#c00;font-size:90%}
  input.invalid{border-color:#c00}
</style>

<h1>Inputs</h1>
<form id="form">
  <div class="field"><label>Text (required): <input name="name" required></label><div class="error" data-for="name"></div></div>
  <div class="field"><label>Number (1-100): <input name="age" type="number" min="1" max="100"></label><div class="error" data-for="age"></div></div>
  <div class="field"><label>Textarea: <textarea name="bio"></textarea></label></div>
  <div class="field"><label>Phone (mask): <input name="phone" placeholder="+1 (___) ___-____"></label><div class="error" data-for="phone"></div></div>
  <div><button type="submit">Submit</button></div>
</form>

<script type="module">
  import { be, app } from '/packages/idae-html/src/lib/core-engine.ts';

  const formEl = be('#form').node;
  function setError(name,msg){
    be(`[data-for="${name}"]`).updateText(msg || '');
    const input = formEl.elements[name];
    if (input) be(input).toggleClass('invalid', !!msg);
  }

  function phoneMask(v){ // naive mask
    const digits = v.replace(/\D/g,'').slice(0,11);
    let s = digits;
    if (s.length>1) s = '+'+s;
    return s;
  }
  const phone = formEl.elements['phone'];
  be(phone).on('input', ()=>{ phone.value = phoneMask(phone.value); });

  be('#form').on('submit', (e)=>{
    e.preventDefault();
    let ok = true;
    // name required
    if (!formEl.elements['name'].value.trim()){ setError('name','Name is required'); ok=false; } else setError('name','');
    // age range
    const age = parseInt(formEl.elements['age'].value,10);
    if (isNaN(age) || age<1 || age>100){ setError('age','Age must be between 1 and 100'); ok=false; } else setError('age','');
    // phone minimal
    if (!/\+?\d{2,}/.test(formEl.elements['phone'].value)){ setError('phone','Enter a valid phone'); ok=false; } else setError('phone','');
    if (ok) alert('Form OK â€” '+JSON.stringify({name:formEl.elements['name'].value, age: formEl.elements['age'].value, phone: formEl.elements['phone'].value}));
  });
</script>
